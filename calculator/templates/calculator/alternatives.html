{% extends "base.html" %}

{% load currency_tags %}
{% block content %}
<div class="container">
  <h2 class="mb-4">Alternative Builds</h2>
  <p class="text-muted">These are the top alternative builds the calculator found. Click "Use this build" to replace the preview.</p>

  <div class="row">
    {% for alt in alternatives %}
    <div class="col-md-6 col-lg-4 mb-3">
      <div class="card h-100">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">Alt #{{ forloop.counter }} â€” Score: {{ alt.score|default:"N/A" }}</h5>
          <p class="mb-1"><strong>Price:</strong> {{ alt.price|default:"N/A" }}</p>
          <ul class="list-unstyled small mb-3">
            <li><strong>CPU:</strong> {{ alt.cpu.name }}</li>
            <li><strong>GPU:</strong> {{ alt.gpu.gpu_name }}</li>
            <li><strong>Motherboard:</strong> {{ alt.motherboard.name }}</li>
            <li><strong>RAM:</strong> {{ alt.ram.name }}</li>
            <li><strong>Storage:</strong> {{ alt.storage.name }}</li>
            <li><strong>PSU:</strong> {{ alt.psu.name }}</li>
            <li><strong>Cooler:</strong> {{ alt.cooler.name }}</li>
            <li><strong>Case:</strong> {{ alt.case.name }}</li>
          </ul>

          <form method="post" action="{% url 'select_alternative' %}" class="mt-auto">
            {% csrf_token %}
            <input type="hidden" name="alt_index" value="{{ alt.index }}">
            <button type="submit" class="btn btn-primary">Use this build</button>
            <a href="{% url 'build_preview' %}" class="btn btn-link">Back to preview</a>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
