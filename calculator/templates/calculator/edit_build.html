{% extends "base.html" %}

{% load currency_tags %}
{% load static %}
{% block content %}
<div class="container">
  <h2 class="mb-4">Edit Build #{{ build.pk }}</h2>

  <!-- Toggle buttons -->
  <div class="btn-group mb-4" role="group">
    <button type="button" class="btn btn-outline-primary text-white" id="basicBtn">Basic</button>
    <button type="button" class="btn btn-outline-secondary text-white" id="advancedBtn">Advanced</button>
  </div>

  <form method="post" action="{% url 'edit_build' build.pk %}">
    {% csrf_token %}
    <input type="hidden" name="mode" id="mode" value="basic">

    <!-- BASIC VIEW -->
    <div id="basicView">
      <div class="mb-3">
        <label for="budget" class="form-label">Budget ({{ build.currency|currency_symbol }})</label>
   <input type="number" name="budget" id="budget" class="form-control"
     value="{{ build.budget|default:1000 }}" required>
        <small class="text-muted">Adjust your budget and parts will be reassigned automatically.</small>
      </div>
      <div class="mt-3 d-flex justify-content-end">
        <button type="submit" class="btn btn-outline-success">Save Changes</button>
      </div>
    </div>

    <!-- ADVANCED VIEW -->
    <div id="advancedView" class="d-none">

      {% include "calculator/edit_build_advanced.html" %}
    </div>

    <div class="mt-4 d-flex justify-content-between">
      <a href="{% url 'saved_builds' %}" class="btn btn-outline-secondary">Cancel</a>
      <button type="submit" class="btn btn-outline-success">Save Changes</button>
    </div>
  </form>
</div>

{% block extra_scripts %}
  <script src="{% static 'js/pages/edit_build.js' %}"></script>
{% endblock %}
{% endblock %}
