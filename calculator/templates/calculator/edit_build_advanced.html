{% load currency_tags %}
<div class="row">
  <!-- CPU -->
  <div class="col-12 col-md-6 col-lg-6 mb-3">
    <div class="card h-100 d-flex flex-column align-items-center">
      <div class="card-body text-center w-100">
        <div class="mb-3">
          <label for="cpu" class="form-label">CPU</label>
          <select name="cpu" id="cpu" class="form-select no-select2 bg-dark text-white" required>
            {% for cpu in cpus %}
              <option value="{{ cpu.pk }}"
                      data-socket="{{ cpu.socket }}"
                      data-tdp="{{ cpu.tdp }}"
                      data-brand="{{ cpu.brand|lower }}"
                      {% if cpu.pk == build.cpu.pk %}selected{% endif %}>
                {{ cpu.name }} — {{ cpu.core_count }} cores @ {{ cpu.boost_clock }}GHz
                {{ build.currency|currency_symbol }}{{ cpu.price|convert_from_usd:build.currency|floatformat:2 }}, Score: {{ cpu.userbenchmark_score }}
              </option>
            {% endfor %}
          </select>
          <div id="cpuMessage" class="alert alert-warning mt-2" style="display:none"></div>
        </div>
        <div class="mb-3">
          <label class="form-label">CPU brand</label>
          <div id="cpuBrandFilters" class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" data-brand="amd">AMD</button>
            <button type="button" class="btn btn-outline-primary" data-brand="intel">Intel</button>
            <button type="button" class="btn btn-outline-secondary" id="cpuClear">All</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- GPU -->
  <div class="col-12 col-md-6 col-lg-6 mb-3">
    <div class="card h-100 d-flex flex-column align-items-center">
      <div class="card-body text-center w-100">
        <div class="mb-3">
          <label for="gpu" class="form-label">GPU</label>
          <select name="gpu" id="gpu" class="form-select no-select2 bg-dark text-white" required>
            {% for gpu in gpus %}
              <option value="{{ gpu.pk }}"
                      data-tdp="{{ gpu.tdp }}"
                      data-brand="{{ gpu.brand|lower }}"
                      {% if gpu.pk == build.gpu.pk %}selected{% endif %}>
                {{ gpu.gpu_name }} — {{ gpu.vram_size }}GB VRAM, {{ gpu.tdp }}W TDP
                {{ build.currency|currency_symbol }}{{ gpu.price|convert_from_usd:build.currency|floatformat:2 }}, Score: {{ gpu.userbenchmark_score }}
              </option>
            {% endfor %}
          </select>
          <div id="gpuMessage" class="alert alert-warning mt-2" style="display:none"></div>
        </div>
        <div class="mb-3">
          <label class="form-label">GPU brand</label>
          <div id="gpuBrandFilters" class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" data-brand="nvidia">NVIDIA</button>
            <button type="button" class="btn btn-outline-primary" data-brand="amd">AMD</button>
            <button type="button" class="btn btn-outline-primary" data-brand="intel">Intel</button>
            <button type="button" class="btn btn-outline-secondary" id="gpuClear">All</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- RAM -->
  <div class="col-12 col-md-6 col-lg-6 mb-3">
    <div class="card h-100 d-flex flex-column align-items-center">
      <div class="card-body text-center w-100">
        <div class="mb-3">
          <label for="ram" class="form-label">RAM</label>
          <select name="ram" id="ram" class="form-select no-select2 bg-dark text-white" required>
            {% for ram in rams %}
              <option value="{{ ram.pk }}"
                      data-ddr="{{ ram.ddr_generation|upper }}"
                      data-speed="{{ ram.frequency_mhz }}"
                      {% if ram.pk == build.ram.pk %}selected{% endif %}>
                {{ ram.name }} — {{ ram.ddr_generation }} {{ ram.frequency_mhz }}MHz
                {{ build.currency|currency_symbol }}{{ ram.price|convert_from_usd:build.currency|floatformat:2 }}, Score: {{ ram.userbenchmark_score }}
              </option>
            {% endfor %}
          </select>
          <div id="ramMessage" class="alert alert-warning mt-2" style="display:none"></div>
        </div>
        <div class="mb-3">
          <label class="form-label">RAM DDR</label>
          <div id="ramDDRFilters" class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" data-ddr="DDR3">DDR3</button>
            <button type="button" class="btn btn-outline-primary" data-ddr="DDR4">DDR4</button>
            <button type="button" class="btn btn-outline-primary" data-ddr="DDR5">DDR5</button>
            <button type="button" class="btn btn-outline-secondary" id="ramClear">All</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Motherboard -->
  <div class="col-12 col-md-6 col-lg-6 mb-3">
    <div class="card h-100 d-flex flex-column align-items-center">
      <div class="card-body text-center w-100">
        <div class="mb-3">
          <label for="motherboard" class="form-label">Motherboard</label>
          <select name="motherboard" id="motherboard" class="form-select no-select2 bg-dark text-white" required>
            {% for mobo in mobos %}
              <option value="{{ mobo.pk }}"
                      data-socket="{{ mobo.socket }}"
                      data-ddr="{{ mobo.ddr_version|upper }}"
                      data-formfactor="{{ mobo.form_factor }}"
                      data-nvme="{{ mobo.nvme_support|yesno:'true,false' }}"
                      {% if mobo.pk == build.motherboard.pk %}selected{% endif %}>
                {{ mobo.name }} — Socket {{ mobo.socket }}, DDR{{ mobo.ddr_version }}, {{ mobo.form_factor }}
              </option>
            {% endfor %}
          </select>
          <div id="moboMessage" class="alert alert-warning mt-2" style="display:none"></div>
        </div>
        <div class="mb-3">
          <label class="form-label">Motherboard socket</label>
          <div id="moboSocketFilters" class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" data-socket="AM4">AM4</button>
            <button type="button" class="btn btn-outline-primary" data-socket="AM5">AM5</button>
            <button type="button" class="btn btn-outline-primary" data-socket="LGA1700">LGA1700</button>
            <button type="button" class="btn btn-outline-primary" data-socket="LGA1851">LGA1851</button>
            <button type="button" class="btn btn-outline-secondary" id="moboSocketClear">All</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Storage -->
  <div class="col-12 col-md-6 col-lg-6 mb-3">
    <div class="card h-100 d-flex flex-column align-items-center">
      <div class="card-body text-center w-100">
        <div class="mb-3">
          <label for="storage" class="form-label">Storage</label>
          <select name="storage" id="storage" class="form-select no-select2 bg-dark text-white" required>
            {% for storage in storages %}
              <option value="{{ storage.pk }}"
                      data-interface="{{ storage.interface|lower }}"
                      {% if storage.pk == build.storage.pk %}selected{% endif %}>
                {{ storage.name }} — {{ storage.capacity_gb }}GB, {{ storage.interface }}
                {{ build.currency|currency_symbol }}{{ storage.price|convert_from_usd:build.currency|floatformat:2 }}
              </option>
            {% endfor %}
          </select>
          <div id="storageMessage" class="alert alert-warning mt-2" style="display:none"></div>
        </div>
        <div class="mb-3">
          <label class="form-label">Storage interface</label>
          <div id="storageFilters" class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" data-iface="pcie gen3">PCIe Gen3</button>
            <button type="button" class="btn btn-outline-primary" data-iface="pcie gen4">PCIe Gen4</button>
            <button type="button" class="btn btn-outline-primary" data-iface="pcie gen5">PCIe Gen5</button>
            <button type="button" class="btn btn-outline-secondary" id="storageClear">All</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PSU -->
  <div class="col-12 col-md-6 col-lg-6 mb-3">
    <div class="card h-100 d-flex flex-column align-items-center">
      <div class="card-body text-center w-100">
        <div class="mb-3">
          <label for="psu" class="form-label">PSU</label>
          <select name="psu" id="psu" class="form-select no-select2 bg-dark text-white" required>
            {% for psu in psus %}
              <option value="{{ psu.pk }}"
                      data-wattage="{{ psu.wattage }}"
                      {% if psu.pk == build.psu.pk %}selected{% endif %}>
                {{ psu.name }} — {{ psu.wattage }}W
                {{ build.currency|currency_symbol }}{{ psu.price|convert_from_usd:build.currency|floatformat:2 }}
            {% endfor %}
          </select>
          <div id="psuMessage" class="alert alert-warning mt-2" style="display:none"></div>
        </div>
        <div class="mb-3">
          <label class="form-label">PSU minimum wattage</label>
          <div id="psuFilters" class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" data-wattage="400">400W+</button>
            <button type="button" class="btn btn-outline-primary" data-wattage="600">600W+</button>
            <button type="button" class="btn btn-outline-primary" data-wattage="800">800W+</button>
            <button type="button" class="btn btn-outline-primary" data-wattage="1000">1000W+</button>
            <button type="button" class="btn btn-outline-secondary" id="psuClear">All</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Cooler -->
  <div class="col-12 col-md-6 col-lg-6 mb-3">
    <div class="card h-100 d-flex flex-column align-items-center">
      <div class="card-body text-center w-100">
        <div class="mb-3">
          <label for="cooler" class="form-label">Cooler</label>
          <select name="cooler" id="cooler" class="form-select no-select2 bg-dark text-white" required>
            {% for cooler in coolers %}
              <option value="{{ cooler.pk }}"
                      data-throughput="{{ cooler.power_throughput }}"
                      {% if cooler.pk == build.cooler.pk %}selected{% endif %}>
                {{ cooler.name }} — {{ cooler.power_throughput }}W throughput
                {{ build.currency|currency_symbol }}{{ cooler.price|convert_from_usd:build.currency|floatformat:2 }}, 
              </option>
            {% endfor %}
          </select>
          <div id="coolerMessage" class="alert alert-warning mt-2" style="display:none"></div>
        </div>
        <div class="mb-3">
          <label class="form-label">Cooler throughput</label>
          <div id="coolerFilters" class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" data-throughput="50">≥50W</button>
            <button type="button" class="btn btn-outline-primary" data-throughput="150">≥150W</button>
            <button type="button" class="btn btn-outline-primary" data-throughput="300">≥300W</button>
            <button type="button" class="btn btn-outline-secondary" id="coolerClear">All</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Case -->
  <div class="col-12 col-md-6 col-lg-6 mb-3">
    <div class="card h-100 d-flex flex-column align-items-center">
      <div class="card-body text-center w-100">
        <div class="mb-3">
          <label for="case" class="form-label">Case</label>
          <select name="case" id="case" class="form-select no-select2 bg-dark text-white" required>
            {% for case in cases %}
              <option value="{{ case.pk }}"
                      data-formfactor="{{ case.case_type }}"
                      {% if case.pk == build.case.pk %}selected{% endif %}>
                {{ case.name }} — {{ case.case_type }}
              </option>
            {% endfor %}
          </select>
          <div id="caseMessage" class="alert alert-warning mt-2" style="display:none"></div>
        </div>
        <div class="mb-3">
          <label class="form-label">Case form factor</label>
          <div id="caseFormFilters" class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" data-formfactor="ATX">ATX</button>
            <button type="button" class="btn btn-outline-primary" data-formfactor="Micro-ATX">Micro-ATX</button>
            <button type="button" class="btn btn-outline-primary" data-formfactor="Mini-ITX">Mini-ITX</button>
            <button type="button" class="btn btn-outline-secondary" id="caseFormClear">All</button>
          </div>
        </div>
      </div>
    </div>
  
